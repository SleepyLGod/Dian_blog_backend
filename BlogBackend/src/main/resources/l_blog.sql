/*
 Navicat MySQL Data Transfer

 Source Server         : ubuntu20.04
 Source Server Type    : MySQL
 Source Server Version : 80026
 Source Host           : 127.0.0.1:3306
 Source Schema         : l_blog

 Target Server Type    : MySQL
 Target Server Version : 80026
 File Encoding         : 65001

 Date: 06/10/2021 22:03:51
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for article
-- ----------------------------
DROP TABLE IF EXISTS `article`;
CREATE TABLE `article` (
  `article_id` bigint NOT NULL AUTO_INCREMENT COMMENT '博文ID',
  `article_user_id` bigint unsigned DEFAULT NULL COMMENT '发表用户ID',
  `article_title` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL COMMENT '博文标题',
  `article_content` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci COMMENT '博文内容',
  `article_views` bigint DEFAULT '0' COMMENT '博文访问量',
  `article_comment_count` bigint DEFAULT '0' COMMENT '博文评论总数',
  `article_like_count` bigint DEFAULT '0' COMMENT '博文点赞数',
  `article_create_time` datetime DEFAULT NULL COMMENT '博文发表时间',
  `article_update_time` datetime DEFAULT NULL COMMENT '博文更新时间',
  `article_is_comment` int unsigned DEFAULT NULL COMMENT '是否允许评论',
  `article_thumbnail` varchar(255) DEFAULT NULL COMMENT '缩略图',
  `article_status` int unsigned DEFAULT '1' COMMENT '状态',
  `article_order` int unsigned DEFAULT NULL COMMENT '排序值',
  `article_deleted_time` datetime NOT NULL DEFAULT '2021-10-01 00:00:00' COMMENT '博文删除时间',
  PRIMARY KEY (`article_id`),
  KEY `article_user_id` (`article_user_id`,`article_deleted_time`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ----------------------------
-- Records of article
-- ----------------------------
BEGIN;
INSERT INTO `article` VALUES (1, 1, 'springmvc 表单中文乱码解决方案', '<p>基本上通过在 web.xml 了配置拦截器就可以解决。</p><p>这里需要注意的是，最好把这段代码放在web.xml中开头的位置，因为拦截有顺序，如果放在后面的话容易拦截不到。</p><p>拦截器代码如下</p><p></p><div><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol start=\\\"1\\\" class=\\\"dp-xml\\\"><li class=\\\"alt\\\"><span><span class=\\\"comments\\\"><!--post乱码过滤器--></span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"comments\\\"><!-- 配置springMVC编码过滤器 --></span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span><span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">filter</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">filter-name</span><span class=\\\"tag\\\">&gt;</span><span>CharacterEncodingFilter</span><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">filter-name</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">filter-class</span><span class=\\\"tag\\\">&gt;</span><span>org.springframework.web.filter.CharacterEncodingFilter</span><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">filter-class</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comments\\\"><!-- 设置过滤器中的属性值 --></span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">init-param</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">param-name</span><span class=\\\"tag\\\">&gt;</span><span>encoding</span><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">param-name</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">param-value</span><span class=\\\"tag\\\">&gt;</span><span>UTF-8</span><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">param-value</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">init-param</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comments\\\"><!-- 启动过滤器 --></span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">init-param</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">param-name</span><span class=\\\"tag\\\">&gt;</span><span>forceEncoding</span><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">param-name</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">param-value</span><span class=\\\"tag\\\">&gt;</span><span>true</span><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">param-value</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">init-param</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\\\"\\\"><span><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">filter</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\\\"alt\\\"><span><span class=\\\"comments\\\"><!-- 过滤所有请求 --></span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">filter-mapping</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">filter-name</span><span class=\\\"tag\\\">&gt;</span><span>CharacterEncodingFilter</span><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">filter-name</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">url-pattern</span><span class=\\\"tag\\\">&gt;</span><span>/*</span><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">url-pattern</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\\\"alt\\\"><span><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">filter-mapping</span><span class=\\\"tag\\\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li></ol></div></div><p><br></p><p>顺便再补充其他的几个可能原因。</p><p></p><p>1、数据库和数据表不是 utf-8 编码</p><p>就在前几天，我遇到的问题正是这个。当时是刚从 windows 搬到 mac。也是在提交 post 表单的时候，中文一直是乱码，后台百度发现，原来是 navicat 的原因。就是在新建 数据库连接(注意是连接)，不能选择 utf-8，应该选择默认的自动。这个地方很坑人。</p><p>数据库和数据表当然是 utf-8，一般这种情况很少出错。</p><p>&nbsp;</p><p>2、修改 Tomcat 的 server.xml 文件，添加 utf-8 编码</p><p></p><div><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol start=\\\"1\\\" class=\\\"dp-j\\\"><li class=\\\"alt\\\"><span><span><connector port=< span=\\\"\\\"><span class=\\\"string\\\">\\\"8080\\\"</span><span>&nbsp;protocol=</span><span class=\\\"string\\\">\\\"HTTP/1.1\\\"</span><span>&nbsp;&nbsp;</span></connector port=<></span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connectionTimeout=<span class=\\\"string\\\">\\\"20000\\\"</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirectPort=<span class=\\\"string\\\">\\\"8443\\\"</span><span>&nbsp;URIEncoding=</span><span class=\\\"string\\\">\\\"UTF-8\\\"</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;useBodyEncodingForURI=<span class=\\\"string\\\">\\\"true\\\"</span><span>&nbsp;/&gt;&nbsp;&nbsp;</span></span></li></ol></div></div><br><p></p><p>3、注意你的 IDE (如Eclipse,IntelliJ IDEA)的 jsp 文件编码，一般在右下角可以看出来，通常我们也要把默认的编码设置为 utf-8。</p><p>&nbsp;</p><p>4、还有一种方法就是 直接对接收到的数据编码转换，我感觉有点麻烦，所以不是很喜欢</p><p></p><div><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol start=\\\"1\\\" class=\\\"dp-j\\\"><li class=\\\"alt\\\"><span><span>String&nbsp;name=</span><span class=\\\"keyword\\\">new</span><span>&nbsp;String((user.getUname()).getBytes(</span><span class=\\\"string\\\">\\\"ISO-8859-1\\\"</span><span>),</span><span class=\\\"string\\\">\\\"utf8\\\"</span><span>);&nbsp;&nbsp;</span></span></li></ol></div></div><p><span>总结：一般来说，第一种拦截器方法是可用的，要注意的是要把拦截器代码放到 web.xml 头部，防止拦截不到，还有表单一定要 post 方式提交。</span></p><p></p>', 16, 2, 1, '2021-10-02 12:25:48', '2021-10-02 12:25:50', 1, ' /img/thumbnail/random/img_1.jpg', 1, 1, '2021-10-01 00:00:00');
INSERT INTO `article` VALUES (2, 1, '[转载]SpringMVC中使用Interceptor拦截器', '<p>SpringMVC 中的Interceptor 拦截器也是相当重要和相当有用的，它的主要作用是拦截用户的请求并进行相应的处理。比如通过它来进行权限验证，或者是来判断用户是否登陆，或者是像12306 那样子判断当前时间是否是购票时间。</p><p><br></p><p>一、定义Interceptor实现类</p><p>SpringMVC 中的Interceptor 拦截请求是通过HandlerInterceptor 来实现的。在SpringMVC 中定义一个Interceptor 非常简单，主要有两种方式，第一种方式是要定义的Interceptor类要实现了Spring 的HandlerInterceptor 接口，或者是这个类继承实现了HandlerInterceptor 接口的类，比如Spring 已经提供的实现了HandlerInterceptor 接口的抽象类HandlerInterceptorAdapter ；第二种方式是实现Spring的WebRequestInterceptor接口，或者是继承实现了WebRequestInterceptor的类。</p><p><br></p><p>（一）实现HandlerInterceptor接口</p><p>HandlerInterceptor 接口中定义了三个方法，我们就是通过这三个方法来对用户的请求进行拦截处理的。</p><p><br></p><p>（1 ）preHandle (HttpServletRequest request, HttpServletResponse response, Object handle) 方法，顾名思义，该方法将在请求处理之前进行调用。SpringMVC 中的Interceptor 是链式的调用的，在一个应用中或者说是在一个请求中可以同时存在多个Interceptor 。每个Interceptor 的调用会依据它的声明顺序依次执行，而且最先执行的都是Interceptor 中的preHandle 方法，所以可以在这个方法中进行一些前置初始化操作或者是对当前请求的一个预处理，也可以在这个方法中进行一些判断来决定请求是否要继续进行下去。该方法的返回值是布尔值Boolean 类型的，当它返回为false 时，表示请求结束，后续的Interceptor 和Controller 都不会再执行；当返回值为true 时就会继续调用下一个Interceptor 的preHandle 方法，如果已经是最后一个Interceptor 的时候就会是调用当前请求的Controller 方法。</p><p><br></p><p>（2 ）postHandle (HttpServletRequest request, HttpServletResponse response, Object handle, ModelAndView modelAndView) 方法，由preHandle 方法的解释我们知道这个方法包括后面要说到的afterCompletion 方法都只能是在当前所属的Interceptor 的preHandle 方法的返回值为true 时才能被调用。postHandle 方法，顾名思义就是在当前请求进行处理之后，也就是Controller 方法调用之后执行，但是它会在DispatcherServlet 进行视图返回渲染之前被调用，所以我们可以在这个方法中对Controller 处理之后的ModelAndView 对象进行操作。postHandle 方法被调用的方向跟preHandle 是相反的，也就是说先声明的Interceptor 的postHandle 方法反而会后执行，这和Struts2里面的Interceptor 的执行过程有点类型。Struts2 里面的Interceptor 的执行过程也是链式的，只是在Struts2 里面需要手动调用ActionInvocation 的invoke 方法来触发对下一个Interceptor 或者是Action 的调用，然后每一个Interceptor 中在invoke 方法调用之前的内容都是按照声明顺序执行的，而invoke 方法之后的内容就是反向的。</p><p><br></p><p>（3 ）afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handle, Exception ex) 方法，该方法也是需要当前对应的Interceptor 的preHandle 方法的返回值为true 时才会执行。顾名思义，该方法将在整个请求结束之后，也就是在DispatcherServlet 渲染了对应的视图之后执行。这个方法的主要作用是用于进行资源清理工作的。</p><p><br></p><p>下面是一个简单的代码说明：</p><p><br></p><p>import javax.servlet.http.HttpServletRequest;</p><p>import javax.servlet.http.HttpServletResponse;</p><p>import org.springframework.web.servlet.HandlerInterceptor;</p><p>import org.springframework.web.servlet.ModelAndView;</p><p>public class SpringMVCInterceptor implements HandlerInterceptor {</p><p>&nbsp; &nbsp; /**&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* preHandle方法是进行处理器拦截用的，顾名思义，该方法将在Controller处理之前进行调用，SpringMVC中的Interceptor拦截器是链式的，可以同时存在&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 多个Interceptor，然后SpringMVC会根据声明的前后顺序一个接一个的执行，而且所有的Interceptor中的preHandle方法都会在&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* Controller方法调用之前调用。SpringMVC的这种Interceptor链式结构也是可以进行中断的，这种中断方式是令preHandle的返&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 回值为false，当preHandle的返回值为false的时候整个请求就结束了。&nbsp;</p><p>&nbsp; &nbsp; &nbsp;*/</p><p>&nbsp; &nbsp; @Override</p><p>&nbsp; &nbsp; public boolean preHandle(HttpServletRequest request,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HttpServletResponse response, Object handler) throws Exception {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; // TODO Auto-generated method stub&nbsp;&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; return false;</p><p>&nbsp; &nbsp; }</p><p>&nbsp; &nbsp; /**&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 这个方法只会在当前这个Interceptor的preHandle方法返回值为true的时候才会执行。postHandle是进行处理器拦截用的，它的执行时间是在处理器进行处理之&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 后，也就是在Controller的方法调用之后执行，但是它会在DispatcherServlet进行视图的渲染之前执行，也就是说在这个方法中你可以对ModelAndView进行操&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 作。这个方法的链式结构跟正常访问的方向是相反的，也就是说先声明的Interceptor拦截器该方法反而会后调用，这跟Struts2里面的拦截器的执行过程有点像，&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 只是Struts2里面的intercept方法中要手动的调用ActionInvocation的invoke方法，Struts2中调用ActionInvocation的invoke方法就是调用下一个Interceptor&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 或者是调用action，然后要在Interceptor之前调用的内容都写在调用invoke之前，要在Interceptor之后调用的内容都写在调用invoke方法之后。&nbsp;</p><p>&nbsp; &nbsp; &nbsp;*/</p><p>&nbsp; &nbsp; @Override</p><p>&nbsp; &nbsp; public void postHandle(HttpServletRequest request,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HttpServletResponse response, Object handler,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ModelAndView modelAndView) throws Exception {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; // TODO Auto-generated method stub&nbsp;&nbsp;</p><p>&nbsp; &nbsp; }</p><p>&nbsp; &nbsp; /**&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 该方法也是需要当前对应的Interceptor的preHandle方法的返回值为true时才会执行。该方法将在整个请求完成之后，也就是DispatcherServlet渲染了视图执行，&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 这个方法的主要作用是用于清理资源的，当然这个方法也只能在当前这个Interceptor的preHandle方法的返回值为true时才会执行。&nbsp;</p><p>&nbsp; &nbsp; &nbsp;*/</p><p>&nbsp; &nbsp; @Override</p><p>&nbsp; &nbsp; public void afterCompletion(HttpServletRequest request,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HttpServletResponse response, Object handler, Exception ex)</p><p>&nbsp; &nbsp; throws Exception {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; // TODO Auto-generated method stub&nbsp;&nbsp;</p><p>&nbsp; &nbsp; }</p><p>}</p><p>（二）实现WebRequestInterceptor 接口</p><p>WebRequestInterceptor 中也定义了三个方法，我们也是通过这三个方法来实现拦截的。这三个方法都传递了同一个参数WebRequest ，那么这个WebRequest 是什么呢？这个WebRequest 是Spring 定义的一个接口，它里面的方法定义都基本跟HttpServletRequest 一样，在WebRequestInterceptor 中对WebRequest 进行的所有操作都将同步到HttpServletRequest 中，然后在当前请求中一直传递。</p><p><br></p><p>（1 ）preHandle(WebRequest request) 方法。该方法将在请求处理之前进行调用，也就是说会在Controller 方法调用之前被调用。这个方法跟HandlerInterceptor 中的preHandle 是不同的，主要区别在于该方法的返回值是void ，也就是没有返回值，所以我们一般主要用它来进行资源的准备工作，比如我们在使用Hibernate 的时候可以在这个方法中准备一个Hibernate 的Session 对象，然后利用WebRequest 的setAttribute(name, value, scope) 把它放到WebRequest 的属性中。这里可以说说这个setAttribute 方法的第三个参数scope ，该参数是一个Integer 类型的。在WebRequest 的父层接口RequestAttributes 中对它定义了三个常量：</p><p><br></p><p>SCOPE_REQUEST ：它的值是0 ，代表只有在request 中可以访问。</p><p><br></p><p>SCOPE_SESSION ：它的值是1 ，如果环境允许的话它代表的是一个局部的隔离的session，否则就代表普通的session，并且在该session范围内可以访问。</p><p><br></p><p>SCOPE_GLOBAL_SESSION ：它的值是2 ，如果环境允许的话，它代表的是一个全局共享的session，否则就代表普通的session，并且在该session 范围内可以访问。</p><p><br></p><p>（2 ）postHandle(WebRequest request, ModelMap model) 方法。该方法将在请求处理之后，也就是在Controller 方法调用之后被调用，但是会在视图返回被渲染之前被调用，所以可以在这个方法里面通过改变数据模型ModelMap 来改变数据的展示。该方法有两个参数，WebRequest 对象是用于传递整个请求数据的，比如在preHandle 中准备的数据都可以通过WebRequest 来传递和访问；ModelMap 就是Controller 处理之后返回的Model 对象，我们可以通过改变它的属性来改变返回的Model 模型。</p><p><br></p><p>（3 ）afterCompletion(WebRequest request, Exception ex) 方法。该方法会在整个请求处理完成，也就是在视图返回并被渲染之后执行。所以在该方法中可以进行资源的释放操作。而WebRequest 参数就可以把我们在preHandle 中准备的资源传递到这里进行释放。Exception 参数表示的是当前请求的异常对象，如果在Controller中抛出的异常已经被Spring 的异常处理器给处理了的话，那么这个异常对象就是是null 。</p><p><br></p><p>&nbsp;</p><p><br></p><p>下面是一个简单的代码说明：</p><p><br></p><p>import org.springframework.ui.ModelMap;</p><p>import org.springframework.web.context.request.WebRequest;</p><p>import org.springframework.web.context.request.WebRequestInterceptor;</p><p>public class AllInterceptor implements WebRequestInterceptor {</p><p>&nbsp; &nbsp; /**&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 在请求处理之前执行，该方法主要是用于准备资源数据的，然后可以把它们当做请求属性放到WebRequest中&nbsp;</p><p>&nbsp; &nbsp; &nbsp;*/</p><p>&nbsp; &nbsp; @Override</p><p>&nbsp; &nbsp; public void preHandle(WebRequest request) throws Exception {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; // TODO Auto-generated method stub&nbsp;&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; System.out.println(\\\"AllInterceptor...............................\\\");</p><p>&nbsp; &nbsp; &nbsp; &nbsp; request.setAttribute(\\\"request\\\", \\\"request\\\", WebRequest.SCOPE_REQUEST);//这个是放到request范围内的，所以只能在当前请求中的request中获取到&nbsp;&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; request.setAttribute(\\\"session\\\", \\\"session\\\", WebRequest.SCOPE_SESSION);//这个是放到session范围内的，如果环境允许的话它只能在局部的隔离的会话中访问，否则就是在普通的当前会话中可以访问&nbsp;&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; request.setAttribute(\\\"globalSession\\\", \\\"globalSession\\\", WebRequest.SCOPE_GLOBAL_SESSION);//如果环境允许的话，它能在全局共享的会话中访问，否则就是在普通的当前会话中访问&nbsp;&nbsp;</p><p>&nbsp; &nbsp; }</p><p>&nbsp; &nbsp; /**&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 该方法将在Controller执行之后，返回视图之前执行，ModelMap表示请求Controller处理之后返回的Model对象，所以可以在&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 这个方法中修改ModelMap的属性，从而达到改变返回的模型的效果。&nbsp;</p><p>&nbsp; &nbsp; &nbsp;*/</p><p>&nbsp; &nbsp; @Override</p><p>&nbsp; &nbsp; public void postHandle(WebRequest request, ModelMap map) throws Exception {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; // TODO Auto-generated method stub&nbsp;&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; for (String key:map.keySet())</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; System.out.println(key + \\\"-------------------------\\\");;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; map.put(\\\"name3\\\", \\\"value3\\\");</p><p>&nbsp; &nbsp; &nbsp; &nbsp; map.put(\\\"name1\\\", \\\"name1\\\");</p><p>&nbsp; &nbsp; }</p><p>&nbsp; &nbsp; /**&nbsp;</p><p>&nbsp; &nbsp; &nbsp;* 该方法将在整个请求完成之后，也就是说在视图渲染之后进行调用，主要用于进行一些资源的释放&nbsp;</p><p>&nbsp; &nbsp; &nbsp;*/</p><p>&nbsp; &nbsp; @Override</p><p>&nbsp; &nbsp; public void afterCompletion(WebRequest request, Exception exception)</p><p>&nbsp; &nbsp; throws Exception {</p><p>&nbsp; &nbsp; &nbsp; &nbsp; // TODO Auto-generated method stub&nbsp;&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; System.out.println(exception + \\\"-=-=--=--=-=-=-=-=-=-=-=-==-=--=-=-=-=\\\");</p><p>&nbsp; &nbsp; }</p><p>}</p><p><br></p><p>&nbsp;二、把定义的拦截器类加到SpringMVC的拦截体系中</p><p>1.在SpringMVC的配置文件中加上支持MVC的schema</p><p><br></p><p>xmlns:mvc=\\\"http://www.springframework.org/schema/mvc\\\"</p><p>xsi:schemaLocation=\\\" http://www.springframework.org/schema/mvc</p><p>&nbsp; &nbsp; http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd\\\"</p><p>下面是我的声明示例：</p><p><br></p><p><br></p><p><br></p><p>这样在SpringMVC的配置文件中就可以使用mvc标签了，mvc标签中有一个mvc:interceptors是用于声明SpringMVC的拦截器的。</p><p><br></p><p>&nbsp;</p><p><br></p><p>（二）使用mvc:interceptors标签来声明需要加入到SpringMVC拦截器链中的拦截器</p><p><br></p><p><br></p><p>&nbsp; &nbsp;&nbsp;</p><p>&nbsp; &nbsp;&nbsp;</p><p>&nbsp; &nbsp;&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p><p>&nbsp; &nbsp;&nbsp;</p><p><br></p><p><br></p><p>由上面的示例可以看出可以利用mvc:interceptors标签声明一系列的拦截器，然后它们就可以形成一个拦截器链，拦截器的执行顺序是按声明的先后顺序执行的，先声明的拦截器中的preHandle方法会先执行，然而它的postHandle方法和afterCompletion方法却会后执行。</p><p><br></p><p>在mvc:interceptors标签下声明interceptor主要有两种方式：</p><p><br></p><p>（1）直接定义一个Interceptor实现类的bean对象。使用这种方式声明的Interceptor拦截器将会对所有的请求进行拦截。</p><p><br></p><p>（2）使用mvc:interceptor标签进行声明。使用这种方式进行声明的Interceptor可以通过mvc:mapping子标签来定义需要进行拦截的请求路径。</p><p><br></p><p>经过上述两步之后，定义的拦截器就会发生作用对特定的请求进行拦截了。</p><p><br></p><p><br></p><p><br></p>', 27, 0, 3, '2021-10-02 12:25:49', '2021-10-02 12:25:59', 1, '/img/thumbnail/random/img_2.jpg', 1, 1, '2021-10-01 00:00:00');
INSERT INTO `article` VALUES (3, 3, 'Hibernate 基本类型', '<p>这里介绍几个特殊的&nbsp;<a href=\\\"https://liuyanzhao.com/tag/hibernate/\\\" title=\\\"查看与 Hibernate 相关的文章\\\" target=\\\"_blank\\\">Hibernate</a>&nbsp;类型和属性</p><h2>一、日期类型</h2><p>我们的 Student 类有一个成员变量 birthday</p><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol class=\\\"dp-j\\\" start=\\\"1\\\"><li class=\\\"alt\\\"><span class=\\\"keyword\\\">private</span>&nbsp;Date&nbsp;birthday;<span class=\\\"comment\\\">//出生日期</span></li></ol></div><p>在我们的 Studnet.hbm.xml 对应的是自动生成的 属性</p><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol class=\\\"dp-xml\\\" start=\\\"1\\\"><li class=\\\"alt\\\"><span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">property</span>&nbsp;<span class=\\\"attribute\\\">name</span>=<span class=\\\"attribute-value\\\">\\\"birthday\\\"</span>&nbsp;<span class=\\\"attribute\\\">type</span>=<span class=\\\"attribute-value\\\">\\\"java.util.Date\\\"</span><span class=\\\"tag\\\">&gt;</span></li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">column</span>&nbsp;<span class=\\\"attribute\\\">name</span>=<span class=\\\"attribute-value\\\">\\\"BIRTHDAY\\\"</span>&nbsp;<span class=\\\"tag\\\">/&gt;</span></li><li class=\\\"alt\\\"><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">property</span><span class=\\\"tag\\\">&gt;</span></span></li></ol></div><p>type 表示该字段的类型，不同的类型，会让数据表的字段类型也不同</p><table class=\\\"layui-table\\\"><tbody><tr><td>type（映射类型）</td><td>描述</td></tr><tr><td>java.util.Date</td><td>年月日时分秒（2017-07-25 18:20:12）</td></tr><tr><td>date</td><td>年月日（2017-07-25）</td></tr><tr><td>time</td><td>时分秒（18:20:12）</td></tr><tr><td>timestamp</td><td>年月日时分秒（2017-07-25 18:20:12）</td></tr></tbody></table><h2>二、对象类型</h2><p>我们这里使用使用 Blob 类型存照片</p><p>1、Student 类中 成员变量如下</p><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol class=\\\"dp-j\\\" start=\\\"1\\\"><li class=\\\"alt\\\"><span class=\\\"keyword\\\">private</span>&nbsp;<span class=\\\"keyword\\\">int</span>&nbsp;sid;<span class=\\\"comment\\\">//学号</span></li><li class=\\\"\\\"><span class=\\\"keyword\\\">private</span>&nbsp;String&nbsp;name;<span class=\\\"comment\\\">//姓名</span></li><li class=\\\"alt\\\"><span class=\\\"keyword\\\">private</span>&nbsp;<span class=\\\"keyword\\\">int</span>&nbsp;sex;<span class=\\\"comment\\\">//性别</span></li><li class=\\\"\\\"><span class=\\\"keyword\\\">private</span>&nbsp;Date&nbsp;birthday;<span class=\\\"comment\\\">//出生日期</span></li><li class=\\\"alt\\\"><span class=\\\"keyword\\\">private</span>&nbsp;String&nbsp;address;<span class=\\\"comment\\\">//地址</span></li><li class=\\\"\\\"><span class=\\\"keyword\\\">private</span>&nbsp;Blob&nbsp;picture;<span class=\\\"comment\\\">//照片&nbsp;&nbsp;&nbsp;</span></li></ol></div><p>2、然后删除原来的 Student.hbm.xml &nbsp;文件，重新生成</p><p>3、在测试类添加&nbsp;testWriteBlob方法</p><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol class=\\\"dp-j\\\" start=\\\"1\\\"><li class=\\\"alt\\\"><span class=\\\"annotation\\\">@Test</span></li><li class=\\\"\\\"><span class=\\\"keyword\\\">public</span>&nbsp;<span class=\\\"keyword\\\">void</span>&nbsp;testWriteBlob()&nbsp;<span class=\\\"keyword\\\">throws</span>&nbsp;Exception&nbsp;{</li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;Student&nbsp;s&nbsp;=&nbsp;<span class=\\\"keyword\\\">new</span>&nbsp;Student(<span class=\\\"number\\\">1</span>,<span class=\\\"string\\\">\\\"杜甫\\\"</span>,<span class=\\\"number\\\">1</span>,<span class=\\\"keyword\\\">new</span>&nbsp;Date(),<span class=\\\"string\\\">\\\"四川\\\"</span>);</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//先获得照片文件</span></li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;f&nbsp;=&nbsp;<span class=\\\"keyword\\\">new</span>&nbsp;File(<span class=\\\"string\\\">\\\"d:\\\"</span>+File.separator+<span class=\\\"string\\\">\\\"boy.jpg\\\"</span>);</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//获得照片文件的输入流</span></li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;input&nbsp;=&nbsp;<span class=\\\"keyword\\\">new</span>&nbsp;FileInputStream(f);</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//创建Blob对象</span></li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;Blob&nbsp;image&nbsp;=&nbsp;<a href=\\\"https://liuyanzhao.com/tag/hibernate/\\\" title=\\\"查看与 Hibernate 相关的文章\\\" target=\\\"_blank\\\">Hibernate</a>.getLobCreator(session).createBlob(input,input.available());</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//设置照片属性</span></li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;s.setPicture(image);</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;session.save(s);</li><li class=\\\"alt\\\">}</li></ol></div><p>注意：这里 Blob 是&nbsp;java.sql.Blob 包下</p><p>4、然后使用 Junit Test 运行&nbsp;testWriteBlob 方法</p><p><img src=\\\"/uploads/2017/10/2017100715505630.png\\\" alt=\\\"2017100715505630.png\\\"><br></p><p>5、为了证明是否真的是写入数据库中，我们重新把照片读出来</p><p>在测试类中添加 testReadBlob 方法</p><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol class=\\\"dp-j\\\" start=\\\"1\\\"><li class=\\\"alt\\\"><span class=\\\"annotation\\\">@Test</span></li><li class=\\\"\\\"><span class=\\\"keyword\\\">public</span>&nbsp;<span class=\\\"keyword\\\">void</span>&nbsp;testReadBlob()&nbsp;<span class=\\\"keyword\\\">throws</span>&nbsp;Exception&nbsp;{</li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;Student&nbsp;s&nbsp;=&nbsp;(Student)session.get(Student.<span class=\\\"keyword\\\">class</span>,&nbsp;<span class=\\\"number\\\">1</span>);</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//获得Blob对象</span></li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;Blob&nbsp;image&nbsp;=&nbsp;s.getPicture();</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//获得照片的输入流</span></li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;InputStream&nbsp;input&nbsp;=&nbsp;image.getBinaryStream();</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//创建输出流</span></li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;File&nbsp;f&nbsp;=&nbsp;<span class=\\\"keyword\\\">new</span>&nbsp;File(<span class=\\\"string\\\">\\\"d:\\\"</span>+File.separator+<span class=\\\"string\\\">\\\"dest.jpg\\\"</span>);</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//获得输出流</span></li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;OutputStream&nbsp;output&nbsp;=&nbsp;<span class=\\\"keyword\\\">new</span>&nbsp;FileOutputStream(f);</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//创建缓冲区</span></li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">byte</span>[]&nbsp;buff&nbsp;=&nbsp;<span class=\\\"keyword\\\">new</span>&nbsp;<span class=\\\"keyword\\\">byte</span>[input.available()];</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;input.read(buff);</li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;output.write(buff);</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;input.close();</li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;output.close();</li><li class=\\\"\\\">}</li></ol></div><p>6、使用 Junit Test 运行 testReadBlob 方法</p><p>我们可以看到 D 盘，已经生成了一张新照片，dest.jpg</p><p>&nbsp;</p><p><img src=\\\"/uploads/2017/10/20171007155038568.png\\\" alt=\\\"20171007155038568.png\\\"><br></p><h2>三、组件属性</h2><p>实体类中某个属性属于用户自定义的类的对象，下面我们通过一个例子来解释</p><p>1、实体类 Student.java 成员变量如下</p><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol class=\\\"dp-j\\\" start=\\\"1\\\"><li class=\\\"alt\\\"><span class=\\\"keyword\\\">private</span>&nbsp;<span class=\\\"keyword\\\">int</span>&nbsp;sid;<span class=\\\"comment\\\">//学号</span></li><li class=\\\"\\\"><span class=\\\"keyword\\\">private</span>&nbsp;String&nbsp;name;<span class=\\\"comment\\\">//姓名</span></li><li class=\\\"alt\\\"><span class=\\\"keyword\\\">private</span>&nbsp;<span class=\\\"keyword\\\">int</span>&nbsp;sex;<span class=\\\"comment\\\">//性别</span></li><li class=\\\"\\\"><span class=\\\"keyword\\\">private</span>&nbsp;Date&nbsp;birthday;<span class=\\\"comment\\\">//出生日期</span></li><li class=\\\"alt\\\"><span class=\\\"comment\\\">//private&nbsp;String&nbsp;address;//地址</span></li><li class=\\\"\\\"><span class=\\\"keyword\\\">private</span>&nbsp;Blob&nbsp;picture;<span class=\\\"comment\\\">//照片&nbsp;&nbsp;&nbsp;</span></li><li class=\\\"alt\\\"><span class=\\\"keyword\\\">private</span>&nbsp;Address&nbsp;address;&nbsp;<span class=\\\"comment\\\">//地址</span></li></ol></div><p>我们这里把之前的 String 类型的 address 改成 Address 类型</p><p>2、Address 类 部分代码如下</p><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol class=\\\"dp-j\\\" start=\\\"1\\\"><li class=\\\"alt\\\"><span class=\\\"keyword\\\">private</span>&nbsp;String&nbsp;postcode;<span class=\\\"comment\\\">//邮编</span></li><li class=\\\"\\\"><span class=\\\"keyword\\\">private</span>&nbsp;String&nbsp;phone;<span class=\\\"comment\\\">//手机</span></li><li class=\\\"alt\\\"><span class=\\\"keyword\\\">private</span>&nbsp;String&nbsp;address;<span class=\\\"comment\\\">//地址</span></li><li class=\\\"\\\"></li><li class=\\\"alt\\\"><span class=\\\"keyword\\\">public</span>&nbsp;Address(String&nbsp;postcode,&nbsp;String&nbsp;phone,&nbsp;String&nbsp;address)&nbsp;{</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">this</span>.postcode&nbsp;=&nbsp;postcode;</li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">this</span>.phone&nbsp;=&nbsp;phone;</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">this</span>.address&nbsp;=&nbsp;address;</li><li class=\\\"alt\\\">}</li></ol></div><p>3、修改 Student.hbm.xml</p><p>将之前的</p><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol class=\\\"dp-xml\\\" start=\\\"1\\\"><li class=\\\"alt\\\"><span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">property</span>&nbsp;<span class=\\\"attribute\\\">name</span>=<span class=\\\"attribute-value\\\">\\\"address\\\"</span>&nbsp;<span class=\\\"attribute\\\">type</span>=<span class=\\\"attribute-value\\\">\\\"java.lang.String\\\"</span><span class=\\\"tag\\\">&gt;</span></li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">column</span>&nbsp;<span class=\\\"attribute\\\">name</span>=<span class=\\\"attribute-value\\\">\\\"ADDRESS\\\"</span>&nbsp;<span class=\\\"tag\\\">/&gt;</span></li><li class=\\\"alt\\\"><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">property</span><span class=\\\"tag\\\">&gt;</span></span></li></ol></div><p>改成</p><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol class=\\\"dp-xml\\\" start=\\\"1\\\"><li class=\\\"alt\\\"><span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">component</span>&nbsp;<span class=\\\"attribute\\\">name</span>=<span class=\\\"attribute-value\\\">\\\"address\\\"</span>&nbsp;<span class=\\\"attribute\\\">class</span>=<span class=\\\"attribute-value\\\">\\\"Address\\\"</span><span class=\\\"tag\\\">&gt;</span></li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">property</span>&nbsp;<span class=\\\"attribute\\\">name</span>=<span class=\\\"attribute-value\\\">\\\"postcode\\\"</span>&nbsp;<span class=\\\"attribute\\\">column</span>=<span class=\\\"attribute-value\\\">\\\"POSTCODE\\\"</span><span class=\\\"tag\\\">/&gt;</span></li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">property</span>&nbsp;<span class=\\\"attribute\\\">name</span>=<span class=\\\"attribute-value\\\">\\\"phone\\\"</span>&nbsp;<span class=\\\"attribute\\\">column</span>=<span class=\\\"attribute-value\\\">\\\"PHONE\\\"</span><span class=\\\"tag\\\">/&gt;</span></li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"tag\\\">&lt;</span><span class=\\\"tag-name\\\">property</span>&nbsp;<span class=\\\"attribute\\\">name</span>=<span class=\\\"attribute-value\\\">\\\"address\\\"</span>&nbsp;<span class=\\\"attribute\\\">column</span>=<span class=\\\"attribute-value\\\">\\\"ADDRESS\\\"</span><span class=\\\"tag\\\">/&gt;</span></li><li class=\\\"alt\\\"><span class=\\\"tag\\\"><!--</span--><span class=\\\"tag-name\\\">component</span><span class=\\\"tag\\\">&gt;</span></span></li></ol></div><p>注意：单词不要打错</p><p>4、修改 测试类 testSaveStudent 代码</p><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol class=\\\"dp-j\\\" start=\\\"1\\\"><li class=\\\"alt\\\"><span class=\\\"annotation\\\">@Test</span></li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">public</span>&nbsp;<span class=\\27\"keyword\\\">void</span>&nbsp;testSaveStudnets()&nbsp;{</li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//生成学生对象</span></li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;Student&nbsp;s&nbsp;=&nbsp;<span class=\\\"keyword\\\">new</span>&nbsp;Student();</li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;s.setName(<span class=\\\"string\\\">\\\"陶渊明\\\"</span>);</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;s.setSex(<span class=\\\"number\\\">1</span>);</li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;s.setBirthday(<span class=\\\"keyword\\\">new</span>&nbsp;Date());</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//s.setAddress(\\\"江西九江\\\");</span></li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;Address&nbsp;address&nbsp;=&nbsp;<span class=\\\"keyword\\\">new</span>&nbsp;Address(<span class=\\\"string\\\">\\\"332000\\\"</span>,<span class=\\\"string\\\">\\\"13512345678\\\"</span>,<span class=\\\"string\\\">\\\"江西九江\\\"</span>);</li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;&nbsp;s.setAddress(address);</li><li class=\\\"alt\\\">&nbsp;&nbsp;&nbsp;&nbsp;session.save(s);<span class=\\\"comment\\\">//保存对象进入数据库</span></li><li class=\\\"\\\">&nbsp;&nbsp;&nbsp;}</li></ol></div><p>5、修改 hibernate.cfg.xml 里的创建表的策略</p><p>因为要修改表结构，暂且把 update 改成 create</p><p>6、用 Junit Test 运行 testSaveStudent 方法</p><p>运行成功，查看数据表</p><p><img src=\\\"/uploads/2017/10/2017100715512437.jpg\\\" alt=\\\"2017100715512437.jpg\\\"><br></p><p>查看 表结构</p><p><img src=\\\"/uploads/2017/10/20171007155135604.jpg\\\" alt=\\\"20171007155135604.jpg\\\"><br></p><p>&nbsp;</p>', 1, 0, 0, '2021-10-02 12:25:20', '2021-10-11 12:25:50', 1, '/img/thumbnail/random/img_3.jpg', 1, 1, '2021-10-01 00:00:00');
INSERT INTO `article` VALUES (4, 2, 'JDBC常用API和使用', '<h2>一、JDBC 常用 API</h2><p><strong>1、Connection 接口</strong></p><table width=\\\"695\\\" class=\\\"layui-table\\\"><tbody><tr><td>方法名称</td><td>功能描述</td></tr><tr><td>getMetaData()</td><td>该方法用于返回数据库的元数据的 DatabaseMetaData 对象</td></tr><tr><td>createStatement</td><td>用于创建一个 Statement 对象来将 SQL 语句发送到数据库</td></tr><tr><td>preparedStatement(String sql)</td><td>用于创建一个 PreparedStatement 对象来将参数化的SQL语句发送到数据库</td></tr><tr><td>prepareCall(String sql)</td><td>用于创建一个 CallableStatement 对象来调用数据库存储过程</td></tr></tbody></table><p><strong>2、Statement 接口</strong></p><table width=\\\"696\\\" class=\\\"layui-table\\\"><tbody><tr><td>方法名称</td><td>功能描述</td></tr><tr><td>boolean execute(String sql)</td><td>用于执行各种 SQL 语句,该方法返回一个 boolean 类型的值。如果为 true,表示所执行的 SQL 语句具备查询结果，可通过 Statement 的getResultSet() 方法查询结果</td></tr><tr><td>int executeUpdate(String sql)</td><td>用于执行 SQL 中的 insert、update 和 delete 语句，该方法返回一个 int 类型的值，表示影响数据库中的行数</td></tr><tr><td>ResultSet executeQuery(String sql)</td><td>用于执行 SQL 中的 select 语句（查询，遍历），该方法返回一个表示查询结果的 ResultSet 对象</td></tr></tbody></table><p><strong>&nbsp;<span>execute是executeQuery和executeUpdate的综合.</span></strong></p><p><strong><span>通常我们没有必要使用execute方法来执行SQL语句，而是使用 executeQuery 或 executeUpdate 更适合。</span></strong></p><p>具体可参考：<a href=\\\"https://liuyanzhao.com/5278.html\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">execute、executeUpdate、executeQuery三者的区别</a></p><p><strong>3、PreparedStatement 接口</strong></p><table width=\\\"695\\\" class=\\\"layui-table\\\"><tbody><tr><td>方法名称</td><td>功能描述</td></tr><tr><td>executeUpdate()</td><td>在此 PreparedStatement 对象中执行 SQL 语句，该语句必须是一个 DML 语句，或者无返回内容的 SQL 语句，比如 DDL 语句</td></tr><tr><td>executeQuery()</td><td>在此 PreparedStatement 对象中执行 SQL 语句，该方法返回的是 ResultSet 对象</td></tr><tr><td>setInt(int parameterIndex, int x)</td><td>将指定的参数设置为 int 值</td></tr><tr><td>setFloat(int parameterIndex, float x)</td><td>将指定的参数设置为 Float 值</td></tr><tr><td>setString(int parameterIndex, String x)</td><td>将指定参数设置的给定的 Date 值</td></tr><tr><td>setDate(int parameterIndex, Date x)</td><td>将指定参数设置给定的 Date 值</td></tr><tr><td>addBatch()</td><td>将一组参数添加到此 PreparedStatement 对象的批处理命令中</td></tr><tr><td>setCharacterStream(parameterIndex, reader, length)</td><td>将指定的输入流写入数据库的文本字段</td></tr><tr><td>setBinaryStream(parameterIndex, x, length)</td><td>将二进制的输入流数据写入到二进制的字段中</td></tr></tbody></table><p>DML 语句：SELECT、UPDATE、INSERT、DELETE</p><p>DLL 语句：CREATE DROP ALERT</p><p>具体参考:&nbsp;<a href=\\\"https://liuyanzhao.com/5283.html\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">sql语句分为三类(DML,DDL,DCL)-介绍</a></p><p>4、ResultSet 接口</p><table class=\\\"layui-table\\\"><tbody><tr><td>getString(int columnIndex)</td><td>用于获取 指定字段的 String 类型的值，参数 columnIndex 代表字段的索引</td></tr><tr><td>getString(String columnName)</td><td>&nbsp;用于获取指定字段的 String 类型的值，参数 columnIndex 代表字段名称</td></tr><tr><td>getInt(int columnIndex)</td><td>&nbsp;用于获取指定字段的 int 类型的值，参数 columnIndex 代表字段的索引</td></tr><tr><td>getInt(String columnName)</td><td>&nbsp;用于获取指定字段的 int 类型的值，参数 columnIndex 代表字段名称</td></tr><tr><td>getDate(int columnIndex)</td><td>&nbsp;用于获取指定字段的 Date类型的值，参数 columnIndex 代表字段索引</td></tr><tr><td>getDate(String columnName)</td><td>&nbsp;用于获取指定字段的 Date类型的值，参数 columnIndex 代表字段名称</td></tr><tr><td>next()</td><td>&nbsp;将游标从当前位置移到下一位置</td></tr><tr><td>absolute(int row)</td><td>将游标移到此 ResultSet 对象的指定行</td></tr><tr><td>afterLast()</td><td>将游标移动到此 ResultSet 对象的末尾，即最后一行之后</td></tr><tr><td>beforeFirst()</td><td>将游标移动到此 ResultSet 对象开头，即第一行之前</td></tr><tr><td>previous()</td><td>将游标移动到此 ResultSet 对象的上一行</td></tr><tr><td>last()</td><td>将游标移动到此 &nbsp;Result 对象的最后一行</td></tr></tbody></table><h2>二、案例</h2><p><strong>1、往数据库里添加数据</strong></p><p>① 数据表结构如下</p><p><img src=\\\"/uploads/2017/10/2017100715402014.png\\\" alt=\\\"2017100715402014.png\\\"><br></p><p><span>② 代码如下</span></p><p><span></span></p><div><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol start=\\\"1\\\" class=\\\"dp-j\\\"><li class=\\\"alt\\\"><span><span class=\\\"keyword\\\">package</span><span>&nbsp;com.liuyanzhao;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.sql.Connection;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.sql.Date;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.sql.DriverManager;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.sql.PreparedStatement;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.sql.SQLException;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.text.ParseException;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.text.SimpleDateFormat;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span><span class=\\\"comment\\\">/*</span>&nbsp;</span></li><li class=\\\"\\\"><span><span class=\\\"comment\\\">&nbsp;*&nbsp;@author&nbsp;LiuYanzhao</span>&nbsp;</span></li><li class=\\\"alt\\\"><span><span class=\\\"comment\\\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"keyword\\\">public</span><span>&nbsp;</span><span class=\\\"keyword\\\">class</span><span>&nbsp;Demo1&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">private</span><span>&nbsp;</span><span class=\\\"keyword\\\">static</span><span>&nbsp;</span><span class=\\\"keyword\\\">final</span><span>&nbsp;String&nbsp;URL&nbsp;=&nbsp;</span><span class=\\\"string\\\">\\\"jdbc:mysql://127.0.0.1:3306/jdbc_study?useUnicode=true&amp;characterEncoding=utf8\\\"</span><span>;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">private</span><span>&nbsp;</span><span class=\\\"keyword\\\">static</span><span>&nbsp;</span><span class=\\\"keyword\\\">final</span><span>&nbsp;String&nbsp;USER&nbsp;=&nbsp;</span><span class=\\\"string\\\">\\\"root\\\"</span><span>;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">private</span><span>&nbsp;</span><span class=\\\"keyword\\\">static</span><span>&nbsp;</span><span class=\\\"keyword\\\">final</span><span>&nbsp;String&nbsp;PASSWORD&nbsp;=&nbsp;</span><span class=\\\"string\\\">\\\"\\\"</span><span>;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">public</span><span>&nbsp;</span><span class=\\\"keyword\\\">static</span><span>&nbsp;Connection&nbsp;conn&nbsp;=&nbsp;</span><span class=\\\"keyword\\\">null</span><span>;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">public</span><span>&nbsp;</span><span class=\\\"keyword\\\">static</span><span>&nbsp;</span><span class=\\\"keyword\\\">void</span><span>&nbsp;main(String[]&nbsp;args)&nbsp;</span><span class=\\\"keyword\\\">throws</span><span>&nbsp;ClassNotFoundException,&nbsp;SQLException,&nbsp;ParseException&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//1、加载驱动，需要提前把&nbsp;jar&nbsp;包添加到&nbsp;classpath&nbsp;中</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Class.forName(<span class=\\\"string\\\">\\\"com.mysql.jdbc.Driver\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//2、创建应用程序与数据库连接的&nbsp;Connection&nbsp;对象</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn&nbsp;=&nbsp;DriverManager.getConnection(URL,&nbsp;USER,&nbsp;PASSWORD);&nbsp;&nbsp;</span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//3、要执行的&nbsp;sql&nbsp;语句：name,password,email,status通过占位符填数,create_date&nbsp;自动为当前时间</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;sql&nbsp;=&nbsp;<span class=\\\"string\\\">\\\"&nbsp;INSERT&nbsp;INTO&nbsp;users\\\"</span><span>+&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"string\\\">\\\"(name,password,birthday,email,create_date,status)&nbsp;\\\"</span><span>+&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"string\\\">\\\"VALUES(\\\"</span><span>+&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"string\\\">\\\"?,?,?,?,current_date(),?)\\\"</span><span>;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//4、创建执行&nbsp;SQL&nbsp;语句的&nbsp;PreparedStatement&nbsp;对象</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreparedStatement&nbsp;ptmt&nbsp;=&nbsp;conn.prepareStatement(sql);&nbsp;&nbsp;</span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ptmt.setString(<span class=\\\"number\\\">1</span><span>,&nbsp;</span><span class=\\\"string\\\">\\\"小美\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ptmt.setString(<span class=\\\"number\\\">2</span><span>,&nbsp;</span><span class=\\\"string\\\">\\\"123456\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ptmt.setDate(<span class=\\\"number\\\">3</span><span>,</span><span class=\\\"keyword\\\">new</span><span>&nbsp;Date((</span><span class=\\\"keyword\\\">new</span><span>&nbsp;SimpleDateFormat(</span><span class=\\\"string\\\">\\\"yyyy-MM-dd\\\"</span><span>).parse(</span><span class=\\\"string\\\">\\\"2011-10-1\\\"</span><span>)).getTime())&nbsp;);&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ptmt.setString(<span class=\\\"number\\\">4</span><span>,&nbsp;</span><span class=\\\"string\\\">\\\"xiaomei@126.com\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ptmt.setInt(<span class=\\\"number\\\">5</span><span>,&nbsp;</span><span class=\\\"number\\\">1</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//5、真正执行&nbsp;sql&nbsp;语句，并返回影响的行数</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">int</span><span>&nbsp;x&nbsp;=&nbsp;ptmt.executeUpdate();&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\\\"string\\\">\\\"影响行数：\\\"</span><span>&nbsp;+&nbsp;x);&nbsp;</span><span class=\\\"comment\\\">//返回1</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\\\"\\\"><span>}&nbsp;&nbsp;</span></li></ol></div></div><br><p></p><p>③运行结果</p><p>上面的操作，将在 jdbc_study 数据库的 users 表中添加一条记录，终端显示 1</p><p><strong>2、查询（打印）数据库信息</strong></p><p>①数据表如下</p><p><img src=\\\"/uploads/2017/10/20171007154127663.png\\\" alt=\\\"20171007154127663.png\\\"><br></p><p><span>②代码如下</span></p><p><span></span></p><div><div class=\\\"dp-highlighter\\\"><div class=\\\"bar\\\"></div><ol start=\\\"1\\\" class=\\\"dp-j\\\"><li class=\\\"alt\\\"><span><span class=\\\"keyword\\\">package</span><span>&nbsp;com.liuyanzhao;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.sql.Connection;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.sql.Date;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.sql.DriverManager;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.sql.PreparedStatement;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.sql.ResultSet;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.sql.SQLException;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.text.ParseException;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span><span class=\\\"keyword\\\">import</span><span>&nbsp;java.text.SimpleDateFormat;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span><span class=\\\"comment\\\">/*</span>&nbsp;</span></li><li class=\\\"alt\\\"><span><span class=\\\"comment\\\">&nbsp;*&nbsp;@author&nbsp;LiuYanzhao</span>&nbsp;</span></li><li class=\\\"\\\"><span><span class=\\\"comment\\\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span><span class=\\\"keyword\\\">public</span><span>&nbsp;</span><span class=\\\"keyword\\\">class</span><span>&nbsp;Demo2&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">private</span><span>&nbsp;</span><span class=\\\"keyword\\\">static</span><span>&nbsp;</span><span class=\\\"keyword\\\">final</span><span>&nbsp;String&nbsp;URL&nbsp;=&nbsp;</span><span class=\\\"string\\\">\\\"jdbc:mysql://127.0.0.1:3306/jdbc_study?useUnicode=true&amp;characterEncoding=utf8\\\"</span><span>;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">private</span><span>&nbsp;</span><span class=\\\"keyword\\\">static</span><span>&nbsp;</span><span class=\\\"keyword\\\">final</span><span>&nbsp;String&nbsp;USER&nbsp;=&nbsp;</span><span class=\\\"string\\\">\\\"root\\\"</span><span>;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">private</span><span>&nbsp;</span><span class=\\\"keyword\\\">static</span><span>&nbsp;</span><span class=\\\"keyword\\\">final</span><span>&nbsp;String&nbsp;PASSWORD&nbsp;=&nbsp;</span><span class=\\\"string\\\">\\\"\\\"</span><span>;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">public</span><span>&nbsp;</span><span class=\\\"keyword\\\">static</span><span>&nbsp;Connection&nbsp;conn&nbsp;=&nbsp;</span><span class=\\\"keyword\\\">null</span><span>;&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">public</span><span>&nbsp;</span><span class=\\\"keyword\\\">static</span><span>&nbsp;</span><span class=\\\"keyword\\\">void</span><span>&nbsp;main(String[]&nbsp;args)&nbsp;</span><span class=\\\"keyword\\\">throws</span><span>&nbsp;ClassNotFoundException,&nbsp;SQLException,&nbsp;ParseException&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//1、加载驱动，需要提前把&nbsp;jar&nbsp;包添加到&nbsp;classpath&nbsp;中</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Class.forName(<span class=\\\"string\\\">\\\"com.mysql.jdbc.Driver\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//2、创建应用程序与数据库连接的&nbsp;Connection&nbsp;对象</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn&nbsp;=&nbsp;DriverManager.getConnection(URL,&nbsp;USER,&nbsp;PASSWORD);&nbsp;&nbsp;</span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//3、要执行的&nbsp;sql&nbsp;语句：name,password,email,satic&nbsp;通过占位符填数,create_date&nbsp;自动为当前时间</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;sql&nbsp;=&nbsp;<span class=\\\"string\\\">\\\"&nbsp;SELECT&nbsp;*&nbsp;FROM&nbsp;users\\\"</span><span>;&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//4、创建执行&nbsp;SQL&nbsp;语句的&nbsp;PreparedStatement&nbsp;对象</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreparedStatement&nbsp;ptmt&nbsp;=&nbsp;conn.prepareStatement(sql);&nbsp;&nbsp;</span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//5、真正执行&nbsp;sql&nbsp;语句，并返回影响的&nbsp;ResultSet</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ResultSet&nbsp;rs&nbsp;=&nbsp;ptmt.executeQuery();&nbsp;&nbsp;</span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"comment\\\">//6、打印&nbsp;ResultSet&nbsp;数据集</span><span>&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\\\"keyword\\\">while</span><span>(rs.next())&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(rs.getInt(<span class=\\\"string\\\">\\\"id\\\"</span><span>)+</span><span class=\\\"string\\\">\\\"&nbsp;\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(rs.getString(<span class=\\\"string\\\">\\\"name\\\"</span><span>)+</span><span class=\\\"string\\\">\\\"&nbsp;\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(rs.getString(<span class=\\\"string\\\">\\\"password\\\"</span><span>)+</span><span class=\\\"string\\\">\\\"&nbsp;\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(rs.getDate(<span class=\\\"string\\\">\\\"birthday\\\"</span><span>)+</span><span class=\\\"string\\\">\\\"&nbsp;\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(rs.getString(<span class=\\\"string\\\">\\\"email\\\"</span><span>)+</span><span class=\\\"string\\\">\\\"&nbsp;\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(rs.getDate(<span class=\\\"string\\\">\\\"create_date\\\"</span><span>)+</span><span class=\\\"string\\\">\\\"&nbsp;\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(rs.getInt(<span class=\\\"string\\\">\\\"status\\\"</span><span>)+</span><span class=\\\"string\\\">\\\"&nbsp;\\\"</span><span>);&nbsp;&nbsp;</span></span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println();&nbsp;&nbsp;</span></li><li class=\\\"alt\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\\\"\\\"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\\\"alt\\\"><span>}&nbsp;&nbsp;</span></li></ol></div></div><p>③ 运行结果</p><p></p><p>控制台上可以看到如下界面</p><p><img src=\\\"/uploads/2017/10/20171007154222212.jpg\\\" alt=\\\"20171007154222212.jpg\\\"><br></p>\'', 0, 0, 0, '2021-10-02 12:25:30', '2021-10-11 12:25:50', 1, '/img/thumbnail/random/img_4.jpg', 1, 1, '2021-10-01 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for article_category_ass
-- ----------------------------
DROP TABLE IF EXISTS `article_category_ass`;
CREATE TABLE `article_category_ass` (
  `article_id` bigint NOT NULL COMMENT '博文ID',
  `category_id` bigint NOT NULL COMMENT '分类ID',
  PRIMARY KEY (`article_id`,`category_id`),
  KEY `article_id` (`article_id`) USING BTREE,
  KEY `category_id` (`category_id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ----------------------------
-- Records of article_category_ass
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for article_tag_ass
-- ----------------------------
DROP TABLE IF EXISTS `article_tag_ass`;
CREATE TABLE `article_tag_ass` (
  `article_id` bigint NOT NULL COMMENT '博文ID',
  `tag_id` bigint NOT NULL COMMENT '标签ID',
  PRIMARY KEY (`article_id`,`tag_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ----------------------------
-- Records of article_tag_ass
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for category
-- ----------------------------
DROP TABLE IF EXISTS `category`;
CREATE TABLE `category` (
  `category_id` bigint unsigned NOT NULL AUTO_INCREMENT COMMENT '分类ID',
  `category_pid` bigint DEFAULT NULL COMMENT '分类父ID',
  `category_name` varchar(50) DEFAULT NULL COMMENT '分类名称',
  `category_description` varchar(255) DEFAULT NULL COMMENT '分类描述',
  `category_icon` varchar(20) DEFAULT NULL COMMENT '图标',
  `category_order` int unsigned DEFAULT '1' COMMENT '排序值',
  `category_deleted_time` datetime NOT NULL DEFAULT '2021-10-01 00:00:00' COMMENT '分类删除时间',
  PRIMARY KEY (`category_id`),
  UNIQUE KEY `category_name` (`category_name`,`category_deleted_time`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ----------------------------
-- Records of category
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for comment
-- ----------------------------
DROP TABLE IF EXISTS `comment`;
CREATE TABLE `comment` (
  `comment_id` bigint unsigned NOT NULL AUTO_INCREMENT COMMENT '评论ID',
  `comment_pid` bigint unsigned DEFAULT '0' COMMENT '上级评论ID',
  `comment_pname` varchar(255) DEFAULT NULL COMMENT '上级评论名称',
  `comment_article_id` bigint unsigned NOT NULL COMMENT '文章ID',
  `comment_author_name` varchar(50) DEFAULT NULL COMMENT '评论人名称',
  `comment_author_email` varchar(50) DEFAULT NULL COMMENT '评论人邮箱',
  `comment_author_url` varchar(50) DEFAULT NULL COMMENT '评论人个人主页',
  `comment_author_avatar` varchar(100) DEFAULT NULL COMMENT '评论人头像',
  `comment_content` varchar(1000) DEFAULT NULL COMMENT '内容',
  `comment_agent` varchar(200) DEFAULT NULL COMMENT '浏览器信息',
  `comment_IP` varchar(50) DEFAULT NULL COMMENT 'IP',
  `comment_create_time` datetime DEFAULT NULL COMMENT '评论时间',
  `comment_role` int DEFAULT NULL COMMENT '角色，是否管理员',
  `comment_user_id` bigint DEFAULT NULL COMMENT '评论ID,可能为空',
  PRIMARY KEY (`comment_id`)
) ENGINE=InnoDB AUTO_INCREMENT=43 DEFAULT CHARSET=utf8mb3;

-- ----------------------------
-- Records of comment
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for personal_info
-- ----------------------------
DROP TABLE IF EXISTS `personal_info`;
CREATE TABLE `personal_info` (
  `self_id` bigint NOT NULL AUTO_INCREMENT COMMENT '菜单ID',
  `self_name` varchar(255) DEFAULT NULL COMMENT '名称',
  `self_url` varchar(255) DEFAULT NULL COMMENT 'URL',
  `self_level` int DEFAULT NULL COMMENT '等级',
  `self_icon` varchar(255) DEFAULT NULL COMMENT '图标',
  `self_order` int DEFAULT NULL COMMENT '排序值',
  PRIMARY KEY (`self_id`),
  UNIQUE KEY `self_name` (`self_name`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb3;

-- ----------------------------
-- Records of personal_info
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for tag
-- ----------------------------
DROP TABLE IF EXISTS `tag`;
CREATE TABLE `tag` (
  `tag_id` bigint unsigned NOT NULL AUTO_INCREMENT COMMENT '标签ID',
  `tag_name` varchar(50) DEFAULT NULL COMMENT '标签名称',
  `tag_description` varchar(100) DEFAULT NULL COMMENT '标签描述',
  `tag_deleted_time` datetime NOT NULL DEFAULT '2021-10-01 00:00:00' COMMENT '标签删除时间',
  PRIMARY KEY (`tag_id`),
  UNIQUE KEY `tag_name` (`tag_name`,`tag_deleted_time`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=46 DEFAULT CHARSET=utf8mb3;

-- ----------------------------
-- Records of tag
-- ----------------------------
BEGIN;
COMMIT;

-- ----------------------------
-- Table structure for user
-- ----------------------------
DROP TABLE IF EXISTS `user`;
CREATE TABLE `user` (
  `id` bigint unsigned NOT NULL AUTO_INCREMENT COMMENT '用户ID',
  `ip` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL COMMENT '上传登录IP',
  `user_name` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '用户名',
  `password` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '用户密码',
  `nickname` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT '' COMMENT '用户昵称',
  `email` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '用户邮箱',
  `avatar` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL COMMENT '用户头像',
  `register_time` datetime DEFAULT NULL COMMENT '注册时间',
  `last_login_time` datetime DEFAULT NULL COMMENT '上传登录时间',
  `url` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT '' COMMENT '主页url',
  `status` int unsigned DEFAULT '1' COMMENT '状态',
  `user_role` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'user' COMMENT '角色',
  `birth` date DEFAULT NULL COMMENT '用户生日',
  `age` int DEFAULT NULL COMMENT '用户年龄',
  `tele` varchar(12) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '用户手机号',
  `user_deleted_time` datetime NOT NULL DEFAULT '2021-10-01 00:00:00' COMMENT '注销时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `name` (`user_name`,`user_deleted_time`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- ----------------------------
-- Records of user
-- ----------------------------
BEGIN;
INSERT INTO `user` VALUES (1, '0:0:0:0:0:0:0:1', 'lhd', '20020516', 'lgod', '2441164168@qq.com', '/img/avatar/avatar1.jpg', '2021-10-01 12:25:15', '2021-10-02 12:25:47', 'https://lgod.com', 1, 'admin', '2002-05-16', 19, '15671615911', '2021-10-01 00:00:00');
INSERT INTO `user` VALUES (2, '0:0:0:0:0:0:0:1', 'hushan', '123456', '落雪听梅', '1695730161@qq.com', '/img/avatar/avatar2.jpg', '2021-10-02 12:25:15', '2021-10-11 12:25:47', 'NULL', 1, 'user', '1975-12-21', 45, '13345172002', '2021-10-01 00:00:00');
INSERT INTO `user` VALUES (3, '0:0:0:0:0:0:0:1', 'lxs', '123456', 'liuxiaoshun', '1452856375@qq.com', '/img/avatar/avatar3.jpg', '2021-10-01 12:25:15', '2021-10-02 12:25:47', 'NULL', 1, 'user', '2002-05-16', 22, '13797739834', '2021-10-01 00:00:00');
INSERT INTO `user` VALUES (4, NULL, 'lhds', '123456', 'sss', '1493270811@qq.com', NULL, '2021-10-04 16:00:34', NULL, NULL, 1, 'user', NULL, NULL, '1351547811', '2021-10-01 00:00:00');
INSERT INTO `user` VALUES (6, NULL, 'lhdss', '456123', 'sss', '2493270811@qq.com', NULL, '2021-10-04 17:26:05', NULL, NULL, 1, 'user', NULL, NULL, '1351547815', '2021-10-01 00:00:00');
INSERT INTO `user` VALUES (7, NULL, 'lhdsss', '456123', 'sss', '2493760811@qq.com', NULL, '2021-10-04 21:43:20', NULL, NULL, 1, 'user', NULL, NULL, '1351547817', '2021-10-01 00:00:00');
COMMIT;

SET FOREIGN_KEY_CHECKS = 1;
